project_name: 'any_light_smolts'
c_date: '2023Feb01' #this is basically a part of project name if you wish.

project_directory: '../data/any_light_smolts' #adding a '..' because the programs are run from subdirectories. feel free to specify an absolute path if that offends you

#The general project settings, will be the same if you keep the directory structure intact
weights_dir: 'weights/'
annotations_dir: 'annotations/'
raw_imgs_dir: 'unprocessed/'
tracks_dir: 'extracted_tracks/'
bbox_images_dir: 'extracted_tracks/'
groundtruths_dir: 'results/groundtruths/'
predictions_dir: 'results/predictions/'
results_dir: 'results/'

autogen_annotations_fname: 'autogen_annotated.yml'
autogen_annotations_md5 : '3a5d58d5d2f530d0d31662c7050bfdf1'
autogen_model:
  pretrained_weights: 'any_light_smolts_lightz_phase_two_2023Feb01.h5'
  pretrained_weights_md5: "24d1ad328e55b0759a2d0e07ef6940de" #leave empty if you are retraining
  num_class: 1
  obj_thresh: 0.9
  nms_thresh: 0.05

checked_annotations_fname: 'manual_annotated_christmas22.yml'
checked_annotations_md5 : '152a5208ab3a0a9e0b2c7e963a922268'

results_config_name: 'results.yml'

models:
  nov22:
    pretrained_weights: 'yolo-v3-coco.h5'
    pretrained_weights_md5: "26cf8e8b5ba9d9d4a3778f9747e3407a" #leave empty if you are retraining
    training_sets: ['training2019']
    phases: 2
    num_class: 1
    obj_thresh: 0.8
    nms_thresh: 0.3
    phase_one:
      BATCH_SIZE: 16
      EPOCHS: 500
      LR: 0.5e-3
      B1: 0.9
      B2: 0.999
      EPS: 0.1e-7
      MIN_DELTA: 0.001
      PATIENCE: 10
    phase_two:
      BATCH_SIZE: 4
      EPOCHS: 100
      LR: 0.1e-3
      B1: 0.9
      B2: 0.999
      EPS: 0.1e-7
      MIN_DELTA: 0.001
      PATIENCE: 10
  lightz:
    pretrained_weights: 'best_smolts_standard_phase_two_2022Dec05.h5' #this is the same as nov22
    pretrained_weights_md5: "451122ca9cd7d25a2006d3959557e848" #leave empty if you are retraining
    training_sets: ['training2019', 'day_choice_2019','day_choice_difficult_2019','nightly_2019','nightly_2021']
    phases: 2
    num_class: 1
    obj_thresh: 0.8
    nms_thresh: 0.1
    phase_one:
      BATCH_SIZE: 16
      EPOCHS: 500
      LR: 0.5e-3
      B1: 0.9
      B2: 0.999
      EPS: 0.1e-7
      MIN_DELTA: 0
      PATIENCE: 10
    phase_two:
      BATCH_SIZE: 4
      EPOCHS: 100
      LR: 0.1e-3
      B1: 0.9
      B2: 0.999
      EPS: 0.1e-7
      MIN_DELTA: 0
      PATIENCE: 10
  lightz_smaller_learning_rate_from_yolo:
    pretrained_weights: 'yolo-v3-coco.h5'
    pretrained_weights_md5: "26cf8e8b5ba9d9d4a3778f9747e3407a" #leave empty if you are retraining
    training_sets: ['training2019', 'day_choice_2019','day_choice_difficult_2019','nightly_2019','nightly_2021']
    phases: 2
    num_class: 1
    obj_thresh: 0.8
    nms_thresh: 0.1
    phase_one:
      BATCH_SIZE: 16
      EPOCHS: 500
      LR: 0.5e-4
      B1: 0.9
      B2: 0.999
      EPS: 0.1e-7
      MIN_DELTA: 0
      PATIENCE: 20
    phase_two:
      BATCH_SIZE: 4
      EPOCHS: 100
      LR: 0.1e-5
      B1: 0.9
      B2: 0.999
      EPS: 0.1e-7
      MIN_DELTA: 0
      PATIENCE: 20
  lightz_smaller_learning_rate:
    pretrained_weights: 'best_smolts_standard_phase_two_2022Dec05.h5' #this is the same as nov22
    pretrained_weights_md5: "451122ca9cd7d25a2006d3959557e848" #leave empty if you are retraining
    training_sets: ['training2019', 'day_choice_2019','day_choice_difficult_2019','nightly_2019','nightly_2021']
    phases: 2
    num_class: 1
    obj_thresh: 0.8
    nms_thresh: 0.1
    phase_one:
      BATCH_SIZE: 16
      EPOCHS: 500
      LR: 0.5e-4
      B1: 0.9
      B2: 0.999
      EPS: 0.1e-7
      MIN_DELTA: 0
      PATIENCE: 20
    phase_two:
      BATCH_SIZE: 4
      EPOCHS: 100
      LR: 0.1e-5
      B1: 0.9
      B2: 0.999
      EPS: 0.1e-7
      MIN_DELTA: 0
      PATIENCE: 20
  dayonly:
    pretrained_weights: 'yolo-v3-coco.h5'
    pretrained_weights_md5: "26cf8e8b5ba9d9d4a3778f9747e3407a" #leave empty if you are retraining
    training_sets: ['training2019', 'day_choice_2019','day_choice_difficult_2019']
    phases: 2
    num_class: 1
    obj_thresh: 0.2
    nms_thresh: 0.3
    phase_one:
      BATCH_SIZE: 16
      EPOCHS: 500
      LR: 0.5e-3
      B1: 0.9
      B2: 0.999
      EPS: 0.1e-7
      MIN_DELTA: 0.001
      PATIENCE: 10
    phase_two:
      BATCH_SIZE: 4
      EPOCHS: 100
      LR: 0.1e-3
      B1: 0.9
      B2: 0.999
      EPS: 0.1e-7
      MIN_DELTA: 0.001
      PATIENCE: 10
  fulllongset:
    pretrained_weights: 'best_smolts_standard_phase_two_2022Dec05.h5'
    pretrained_weights_md5: "451122ca9cd7d25a2006d3959557e848" #leave empty if you are retraining
    training_sets: ['training2019', 'day_choice_2019','day_choice_difficult_2019','nightly_2019','nightly_2021']
    phases: 2
    num_class: 1
    obj_thresh: 0.8
    nms_thresh: 0.1
    phase_one:
      BATCH_SIZE: 16
      EPOCHS: 150
      LR: 0.5e-3
      B1: 0.9
      B2: 0.999
      EPS: 0.1e-7
      MIN_DELTA: 0
      PATIENCE: 150
    phase_two:
      BATCH_SIZE: 4
      EPOCHS: 100
      LR: 0.1e-3
      B1: 0.9
      B2: 0.999
      EPS: 0.1e-7
      MIN_DELTA: 0
      PATIENCE: 100
  march:
    pretrained_weights: 'any_light_smolts_lightz_phase_two_2023Feb01.h5'
    pretrained_weights_md5: "24d1ad328e55b0759a2d0e07ef6940de" #leave empty if you are retraining
    training_sets: ['training2019', 'day_choice_2019','day_choice_difficult_2019','nightly_2019','nightly_2021',"train_mar"]
    phases: 2
    num_class: 1
    obj_thresh: 0.8
    nms_thresh: 0.1
    phase_one:
      BATCH_SIZE: 16
      EPOCHS: 500
      LR: 0.5e-3
      B1: 0.9
      B2: 0.999
      EPS: 0.1e-7
      MIN_DELTA: 0
      PATIENCE: 10
    phase_two:
      BATCH_SIZE: 4
      EPOCHS: 100
      LR: 0.1e-3
      B1: 0.9
      B2: 0.999
      EPS: 0.1e-7
      MIN_DELTA: 0
      PATIENCE: 10



testing_sets: ['testing2019','test_2019', 'test_nightly_2021','additional_test']


subsets:
  testing2019:
    directory: 'subsets/testing2019/'
    number_of_images: 248
    description: 'original testing set from 2019'
    filelist: '' #if filelist is empty, use regex
    regex: '*.png'
  training2019:
    directory: 'subsets/training2019/'
    number_of_images: 1162
    description: 'original training set from 2019'
    filelist: ''
    regex: '*.png'
  day_choice_2019:
    directory: 'subsets/day_choice_2019/'
    number_of_images: 387
    description: 'additional training set from 2019 choice chamber recordings'
    filelist: ''
    regex: '*.png'
  day_choice_difficult_2019:
    directory: 'subsets/day_choice_difficult_2019/'
    number_of_images: 475
    description: 'additional particularly nasty images from 2019 choice chamber recordings'
    filelist: ''
    regex: '*.png'
  nightly_2019:
    directory: 'subsets/nightly_2019/'
    number_of_images: 41
    description: 'Night-time recordings from 2019'
    filelist: ''
    regex: '*.png'
  nightly_2021:
    directory: 'subsets/nightly_2021/'
    number_of_images: 301
    description: 'Night-time recordings from 2021'
    filelist: ''
    regex: '*.png'
  test_2019:
    directory: 'subsets/test_2019/'
    number_of_images: 90
    description: 'Additional testing images from 2019 for testing (mostly daytime)'
    filelist: ''
    regex: '*.png'
  test_nightly_2021:
    directory: 'subsets/test_nightly_2021/'
    number_of_images: 58
    description: 'Test set of night-time recordings from 2021'
    filelist: ''
    regex: '*.png'
  additional_test:
    directory: 'subsets/additional_test/'
    number_of_images: 26
    description: 'I see the tracker being extremely bad, so I want to see performance on some frames from the videos. Those pictures are repeated in train_mar partially'
    filelist: ''
    regex: '*.png'
  train_mar:
    directory: 'subsets/train_mar/'
    number_of_images: 520
    description: 'Extracted many images (mostly night) from the set of videos used for tunning of the tracker. I believe there are still some improvement to be made on training. Interestingly I presented 533 images, but becasue some were already in addtional_test set they were skipped.'
    filelist: ''
    regex: '*.png'

common:
  LABELS: ['aoi']
  IMAGE_W: 1280 # or must be a multiplier of 32 in current version
  IMAGE_H: 704 #must match whatever yolo model was trained on
  MAX_L: 300
  MIN_L: 20

  NO_OBJECT_SCALE: 1.0
  OBJECT_SCALE: 5.0
  COORD_SCALE: 2.0
  CLASS_SCALE: 1.0
